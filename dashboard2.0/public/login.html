<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Monitech | Login</title>
    <link rel="icon" href="./assets/icon.svg">
    <link rel="stylesheet" href="./css/loginStyle.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100&display=swap" rel="stylesheet">
</head>

<body>

    <!-- Header -->

    <div class="header">
        <div class="container">

            <!-- <svg width="175" height="70" viewBox="0 0 145 50" fill="none" xmlns="http://www.w3.org/2000/svg"> -->
            <img src="./assets/logo-header.svg" height="50">
            <g clip-path="url(#clip0_25_1082)">
                <path d="M-14.5 -5H159.5V55H-14.5V-5Z" fill="white" />
                <path d="M-14.5 -5H159.5V55H-14.5V-5Z" fill="white" />
                <path d="M-14.5 -5H159.5V55H-14.5V-5Z" fill="white" />
                <path d="M6.7168 7.04166L42.5514 25.2331L6.7168 42.9687L14.9108 25.0052L6.7168 7.04166Z"
                    fill="#3D33A5" />
                <path
                    d="M12.0908 7.72395C14.5694 8.98177 17.048 10.2409 19.5281 11.5C24.5563 14.0521 29.5845 16.6042 34.6112 19.1562C38.573 21.168 42.5348 23.1784 46.4951 25.1888C46.9724 25.431 47.4482 25.6732 47.9255 25.9141V24.5508C45.4197 25.7904 42.9154 27.0299 40.4096 28.2695C35.3482 30.776 30.2868 33.2812 25.2239 35.7865C21.2848 37.737 17.3441 39.6862 13.4049 41.6367C12.9669 41.8529 12.5289 42.0703 12.0908 42.2865C12.5394 42.5846 12.9865 42.8815 13.4351 43.1797C14.9848 39.7826 16.5345 36.3854 18.0842 32.9883C19.0252 30.9232 19.9677 28.8581 20.9102 26.793C21.1322 26.3047 21.3557 25.8164 21.5778 25.3281C21.7303 24.9948 21.6034 24.737 21.463 24.4323C19.6339 20.4232 17.8063 16.4128 15.9771 12.4049C15.1298 10.5469 14.2825 8.6888 13.4351 6.83203C13.2524 6.43099 12.8294 6.15625 12.3099 6.27994C11.8673 6.38541 11.4867 6.85026 11.6709 7.2513C13.2191 10.6484 14.7688 14.0456 16.3185 17.4414C17.4996 20.0325 18.6823 22.6237 19.8634 25.2148V24.7956C18.3138 28.1914 16.7656 31.5885 15.2159 34.9857C14.0348 37.5768 12.8521 40.1667 11.6709 42.7591C11.3613 43.4362 12.3748 43.9674 13.0152 43.651C15.5195 42.4115 18.0238 41.1706 20.5295 39.931C25.5909 37.4258 30.6539 34.9206 35.7168 32.4154C39.6559 30.4648 43.5966 28.5143 47.5343 26.5638C47.9738 26.3477 48.4103 26.1315 48.8499 25.9141C49.448 25.6185 49.4374 24.849 48.8499 24.5508C46.3698 23.2917 43.8912 22.0339 41.4111 20.7747C36.3829 18.2227 31.3562 15.6706 26.328 13.1185C22.3677 11.1068 18.4044 9.09635 14.4441 7.08463C13.9683 6.84375 13.491 6.60156 13.0152 6.35937C11.9942 5.84244 11.0743 7.20703 12.0908 7.72395Z"
                    fill="#44359F" />
                <path
                    d="M64.0054 29.8823L63.2185 20.8758H61.4528L58.2764 27.8992L55.1076 20.8758H53.357L52.5625 29.8823H53.8615L54.5668 22.4748L57.8837 29.8823H58.6767L62.0162 22.45L62.714 29.8823H64.0054Z"
                    fill="#6C8CFF" />
                <path
                    d="M71.3657 30.0034C74.2823 30.0034 76.5525 28.2573 76.5525 25.3732C76.5525 22.5008 74.2823 20.7547 71.3657 20.7547C68.4204 20.7547 66.1638 22.5008 66.1638 25.3732C66.1638 28.2573 68.4204 30.0034 71.3657 30.0034ZM71.3657 28.9227C69.1982 28.9227 67.4854 27.644 67.4854 25.3732C67.4854 23.1271 69.1982 21.8485 71.3657 21.8485C73.518 21.8485 75.2233 23.1271 75.2233 25.3732C75.2233 27.644 73.518 28.9227 71.3657 28.9227Z"
                    fill="#6F6CFF" />
                <path
                    d="M86.124 20.8758V28.1297L80.4917 20.8758H79.1051V29.8823H80.4101V22.5972L86.0424 29.8823H87.4441V20.8758H86.124Z"
                    fill="#816CFF" />
                <path d="M90.7247 29.8823H92.0524V20.8758H90.7247V29.8823Z" fill="#6C72FF" />
                <path d="M102.168 20.4968H95.4824V21.5398H98.1679V29.5033H99.4896V21.5398H102.168V20.4968Z"
                    fill="#474A51" />
                <path
                    d="M109.826 21.5398V20.4968H104.224V29.5033H109.826V28.4604H105.582V25.5177H109.321V24.489H105.582V21.5398H109.826Z"
                    fill="#474A51" />
                <path
                    d="M116.845 29.6244C118.908 29.6244 120.643 28.7481 121.461 27.2325L120.236 26.8041C119.598 27.9174 118.335 28.5307 116.845 28.5307C114.677 28.5307 112.964 27.252 112.964 24.9942C112.964 22.7481 114.677 21.4695 116.845 21.4695C118.335 21.4695 119.598 22.0893 120.236 23.2026L121.461 22.7677C120.643 21.2585 118.908 20.3757 116.845 20.3757C113.899 20.3757 111.643 22.1218 111.643 24.9942C111.643 27.8783 113.899 29.6244 116.845 29.6244Z"
                    fill="#474A51" />
                <path
                    d="M123.738 29.5033H125.074V25.5059H130.365V29.5033H131.692V20.4968H130.365V24.476H125.074V20.4968H123.738V29.5033Z"
                    fill="#474A51" />
            </g>
            <defs>
                <clipPath id="clip0_25_1082">
                    <rect width="145" height="50" fill="white" />
                </clipPath>
            </defs>
            </svg>

            <ul class="navbar">
                <li>
                    <a href="./Index.html">Início</a>
                </li>
                <li>
                    <a href="./index.html#aboutus">Sobre nós</a>
                </li>

                <li>
                    <a href="./index.html#contact">Contatos</a>
                </li>

                <li>
                    <a class="cadastro" href="./cadastro.html">Cadastre-se</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="banner-login">
        <div class="box-login">
            <div class="img">
                <img src="./assets/logo-gif.gif">
            </div>
            <div class="formulario">

                <div class="div-email">E-mail:</div>
                <input name="emailLogin" type="text" id="ipt_email" class="ipt-email">
                <br>
                <div class="div-senha">Senha:</div>
                <input name="senhaLogin" type="password" id="ipt_senha" class="ipt-senha">
                <br><br>
                <button onclick="entrar()">Entrar</button>

            </div>
            <h6>Esqueceu sua senha? <a href="#senharedefinir"><u>clique aqui</u></a></h6>
        </div>
    </div>
    <!--footer-->
    <footer>
        <div class="footer-content">
            <h5>MoniTech</h5>
            <ul class="socials">
                <li><a href="#"><i class="fa fa-facebook"><img src="./assets/facebook.png" alt=""></i></a></li>
                <li><a href="#"><i class="fa fa-twitter"><img src="./assets/instagram.png" alt=""></i></a></li>
                <li><a href="#"><i class="fa fa-google-plus"><img src="./assets/linkedin.png" alt=""></i></a></li>
                <li><a href="#"><i class="fa fa-youtube"><img src="./assets/twitter.png" alt=""></i></a></li>
            </ul>
            <div class="footer-bottom">
                <p>copyright &copy;2022 <a href="#">MoniTech</a> </p>
                <div class="footer-menu">
                    <ul class="f-menu">
                        <li><a href="./Index.html">Início</a></li>
                        <li><a href="./Index.html#aboutus">Sobre</a></li>
                        <li><a href="./Index.html#contact">Contatos</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </footer>
</body>

</html>

<script>
    function entrar() {


        var emailVar = ipt_email.value;
        var senhaVar = ipt_senha.value;

        console.log("FORM LOGIN: ", emailVar);
        console.log("FORM SENHA: ", senhaVar);

        // TODO: VERIFICAR AS VALIDAÇÕES QUE ELES ESTÃO APRENDENDO EM ALGORITMOS 
        if (emailVar == "" || senhaVar == "") {
            window.alert("Preencha todos os campos para prosseguir!");

            return false;
        }

        if (emailVar.indexOf("@") == -1 || emailVar.indexOf(".com") == -1) {
            window.alert("Ops, e-mail inválido! Verifique e tente novamente.");

            return false;
        }

        fetch("/usuarios/autenticar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                emailServer: emailVar,
                senhaServer: senhaVar
            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")
            if (resposta.ok) {
                console.log(resposta);
                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));

                    sessionStorage.EMAIL_USUARIO = json.email;
                    sessionStorage.NOME_USUARIO = json.nome;
                    sessionStorage.ID_USUARIO = json.id;
                    sessionStorage.CARGO_USUARIO = json.cargo;

                    setTimeout(function () {
                        window.location = "/bem-vindo.html";
                    }, 1000); // apenas para exibir o loading

                });

            } else {

                window.alert("Houve um erro ao tentar realizar o login!");

                resposta.text().then(texto => {
                    console.error(texto);

                });
            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }

</script>